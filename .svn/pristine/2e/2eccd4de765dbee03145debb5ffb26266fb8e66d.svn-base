<!-- load specific css/js only for this page -->
<?php if($this->viewDevice == "mobile"){ ?>
	<link rel="stylesheet" type="text/css" href="<?php echo WEB_URL; ?>css/mobile/settingCSS.css">
<?php }elseif($this->viewDevice == "web"){ ?>
	<link rel="stylesheet" type="text/css" href="<?php echo WEB_URL; ?>css/web/settingCSS.css">
<?php } ?>
	<script src="<?php echo WEB_URL; ?>js/account.js" type="text/javascript"></script>

<div class="limitWebView settingBigDiv" ng-controller="SyntecAccount">
	<input type="hidden" ng-init="initSettingData()">
	<a href="javascript:history.back();" title="返回" class="backLink">
		<span class="back_icon"></span>
		<span style="position: absolute;width: 100px;left: 32px;top: 0;font-size: 20px;">返回</span>
	</a>
	
	<h2 style="text-align: center;">設定</h2>
	
	<div class="settingDiv" style="border-right: 3px solid rgba(0,0,0,0.8);">
		<h3>使用者資訊</h3>
		<img src="images/usericon.png" width="80px">
		<div class="infoDiv">
			<table border="2" style="width:60%;border-collapse: collapse;margin: 50px auto 0px auto;font-size: 15px;">
				<tr class="infoRow" ng-repeat="(userKey, value) in userInfo" style="bor">
					<td style="text-align: right;white-space: nowrap;">{{value.name}}</td>
					<td style="text-align: left;">
						<input class="infoInput" style="background:#ffffff;" type="password" ng-model="value.data" ng-if="userKey == 'newPassword'" ng-enter="changePwd(value.data)" placeholder="請輸入新密碼">
						<p class="infoInput" type="text" ng-if="userKey != 'newPassword'">{{value.data}}</p>
					</td>
				</tr>
			</table>
			<p style="color:red;font-size: 15px;" ng-show="userInfo['newPassword'].data.length != 0">下次登入請用新密碼</p>
			<p style="color:red;font-size: 15px;">{{errorMsg}}</p>
			<div style="margin-top: 80px;">
				<a href="javascript:;" class="button" title="更改密碼" ng-show="userInfo['newPassword'].data.length != 0" ng-click="changePwd(userInfo['newPassword'].data)">更改密碼</a>
			</div>
		</div>
	</div>


	<div class="settingDiv">
		<h3>工廠資訊</h3>
		<img src="data:image/PNG;base64,<?php echo base64_encode($_SESSION['RemoteViewer']['companyInfo']['img']); ?>" width="80px">
		<div style="width:150px;margin:15px auto;height:40px;position: relative;" title="天稼動率計算方式">
			<h4 style="position: absolute;left: -70px;top: 7px">稼動率=</h4>
			<h5 style="border-bottom: 1px solid #111d6d;">實計每日加工時間</h5>
			<h5 style="">預設該廠每日工時</h5>
		</div>
		<div class="infoDiv" style="margin-top: 20px;overflow-y: auto; height:460px;text-align: left;">
			<div class="factoryCard" ng-repeat="f in factoryInfo">
				<img src="images/IconBlue.ico" title="工廠圖片" width="48px" height="48px">
				<h3 title="工廠名稱" style="float:right">{{f.name}}</h3>
				<div class="ooeSettingDiv">
					<div class="ooeTimeSetDiv">
						<span>預計每日工時</span>
						<input type="text" class="timeClass" placeholder="時" ng-model="f.workOfDay['hour']" ng-change="isValidTime(f)">
						<input type="text" class="timeClass" placeholder="分" ng-model="f.workOfDay['minute']" ng-change="isValidTime(f)">
						<input type="text" class="timeClass" placeholder="秒" ng-model="f.workOfDay['second']" ng-change="isValidTime(f)">
					</div>
				</div>
				<div class="fDetails">
					<p>{{f.address}}</p>
					<p>{{f.tel}}</p>
				</div>
				<a href="javascript:;" class="button" style="padding:5px 7px;font-size: 13px;position: absolute;right: 20px;bottom: 20px;border-radius: 1px;" title="更改稼動率" ng-show="f.isValidTimeUnit" ng-click="setOOE(f)">修改預計每日工時</a>
			</div>
		</div>
	</div>

</div>